\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{texPreamble}[5/26/2017]
%% I'm in the texmf directory (original copy) and 
%%     ln -s ~/texmf/tex/latex/local/texPreamble.sty $TEX_FOLDER/. 
%%     for version control   %% Changed 12/21/17 peter@workhorse
%%  ~/.texmf/tex/latex/local %% Changed 11/13/17 peter@workhorse
%%  /usr/share/texmf/tex/latex (not here)
%%  ~/texmf/tex/latex/local %% Changed 10/10/16 PW
%% or within the folder of the tex file using me.
%% Call me with \usepackage{texPreamble}

\RequirePackage[all]{xy}
\RequirePackage{array}
\RequirePackage{advdate}
\RequirePackage{graphicx}
\RequirePackage[lmargin=1in, rmargin=1in, tmargin=1in, bmargin=0.5in]{geometry}
\RequirePackage{amsmath, amssymb, xfrac, amsthm}
\RequirePackage{verbatim}
\RequirePackage{multirow, pbox, hhline}
\RequirePackage[table]{xcolor}
\RequirePackage{bm}
\RequirePackage{nicefrac}
\RequirePackage{mathtools}
\RequirePackage{standalone}
\RequirePackage{arydshln}
\RequirePackage{hyperref}
\RequirePackage{textcomp}
\RequirePackage{pdfpages}
\RequirePackage{pdflscape}
\RequirePackage[shortlabels, inline]{enumitem} %customize enumerate at initialization
\RequirePackage[makeroom]{cancel}              %cross out math
\RequirePackage[normalem]{ulem}
\RequirePackage{booktabs}
\RequirePackage{tasks}                         %horizontal lists
\RequirePackage{blindtext}                     %lorem ipsum...
\RequirePackage{pgf, tikz}
\RequirePackage{tabu}
\RequirePackage{nth}
\RequirePackage{wasysym}                       %emoticons
\RequirePackage{blkarray}                      %label rows/cols of matrices
\RequirePackage{xifthen}
\RequirePackage{moreverb}                      %verbatiminput ...
\let\verbatiminput=\verbatimtabinput           %respects tabbing
\RequirePackage[linesnumbered,lined,ruled,commentsnumbered]{algorithm2e}
\RequirePackage{pgfplots}
  \pgfplotsset{compat=1.10}
  \usepgfplotslibrary{fillbetween}
  \usetikzlibrary{patterns}
  \usetikzlibrary{arrows}
  \usetikzlibrary{calc, positioning}
  %% solid and open circles
  \pgfplotsset{soldot/.style={color=blue,only marks,mark=*}}
  \pgfplotsset{holdot/.style={color=blue,fill=white,only marks,mark=*}}
%% Figures with subplots and captions
\RequirePackage{subcaption, cleveref}
\captionsetup[subfigure]{subrefformat=simple,labelformat=simple}
\renewcommand\thesubfigure{(\alph{subfigure})}


%% The following 4 lines are so standalone and nocite play nice together
\RequirePackage{etoolbox}
\makeatletter
\patchcmd{\nocite}{\ifx\@onlypreamble\document}{\iftrue}{}{}
\makeatother

% Allows multi-line eqns to split pages
\allowdisplaybreaks

% Redefinition of matrix macro for customizing line spacing
% usage: '\begin{bmatrix}[2]...'
\makeatletter
\renewcommand*\env@matrix[1][\arraystretch]{%
  \edef\arraystretch{#1}%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{*\c@MaxMatrixCols c}}
\makeatother

% Custom color for table rows
\definecolor{lightgray}{gray}{0.8}
%% place the following before a table for alternating row colors
% \rowcolors{1}{}{lightgray}

% Custom variable for header and footer of quizzes/exams
\makeatletter
\newcommand{\class}[1]{\newcommand{\@class}{#1}}
\newcommand{\theclass}[0]{\@class}
\newcommand{\fname}[1][Peter]{\newcommand{\@fname}{#1}}
\newcommand{\thefname}[0]{\@fname}
\newcommand{\lname}[1][Westerbaan]{\newcommand{\@lname}{#1}}
\newcommand{\thelname}[0]{\@lname}
\fname\lname
\newcommand{\collab}[1]{\newcommand{\@collab}{#1}}
\newcommand{\thecollab}[0]{\@collab}
\makeatother

%% Custom list number format
\setenumerate[1]{label=\arabic*.}
\setenumerate[2]{label=\alph*)}
\setenumerate[3]{label=\roman*)}

%% Increase max size of a matrix
\setcounter{MaxMatrixCols}{20}

%% Custom table column: 
  % Math mode
\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{R}{>{$}r<{$}}
  % Fixed width 
\newcolumntype{M}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}


% Custom color for hightlighting table cells
\definecolor{hiLiYel}{RGB}{255,255,0}
\newcommand\cecol{\cellcolor{hiLiYel}}
\newcolumntype{h}{>{\columncolor{hiLiYel}}{c}}

% Tikz settings
\tikzset{>=stealth}
\tikzstyle{myNode} = [circle, 
    fill=black!10,
    rounded corners, 
    minimum width=20pt, 
    text centered, 
    thick,
    draw=black]

% ----------------------------------------------------------------
\vfuzz2pt % Don't report over-full v-boxes if over-edge is small
\hfuzz2pt % Don't report over-full h-boxes if over-edge is small
%% THEOREMS -------------------------------------------------------
\newtheorem*{theorem*}{Theorem} %% Theorem without numbering
\newtheorem{theorem}{Theorem}
\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem*{lem*}{Lemma}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
%%
\theoremstyle{definition}
\newtheorem*{defn*}{Definition} %% Definition without numbering
\newtheorem{defn}[thm]{Definition}
\newtheorem{case}{Case}
\newtheorem{subcase}{Case}
\numberwithin{subcase}{case}
\newtheorem{claim}{Claim}
%%
\theoremstyle{remark}
\newtheorem{rem}[thm]{Remark}
%\numberwithin{equation}{section}
%% Special Operators ----------------------------------------------
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\col}{Col}
\DeclareMathOperator{\cond}{Cond}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\csch}{csch}
\DeclareMathOperator{\inn}{Inn}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Rank}{Rank}
\DeclareMathOperator{\Ran}{Ran}
\DeclareMathOperator{\Range}{Range}
\DeclareMathOperator{\row}{Row}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\Var}{Var}
%% MATH -----------------------------------------------------------
\def\<{\langle}
\def\>{\rangle}
\newcommand{\A}{\mathcal{A}}
\newcommand{\abs}[1]{{\left\vert#1\right\vert}}
\newcommand{\bbc}{\mathbb C}
\newcommand{\bbn}{\mathbb N}
\newcommand{\bbq}{\mathbb Q}
\newcommand{\bbr}{\mathbb R}
\newcommand{\bbz}{\mathbb Z}
\newcommand{\bfO}{\mathbf{0}}
\newcommand{\bfA}{\mathbf A}
\newcommand{\bfb}{\mathbf b}
\newcommand{\bfc}{\mathbf c}
\newcommand{\bfx}{\mathbf x}
\newcommand{\bfy}{\mathbf y}
\newcommand{\bracket}[1]{{\left\langle #1 \right\rangle}}
\newcommand{\BX}{\mathbf{B}(X)}
\newcommand{\ceil}[1]{{\left\lceil #1 \right\rceil}}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{\node[shape=circle,draw,inner sep=2pt] (char) {#1};}}
\newcommand{\contradiction}[1][]{\overset{#1}{\Rightarrow\hspace{-2pt}\Leftarrow}}
\newcommand{\ds}{\displaystyle}
\newcommand{\eps}{\varepsilon}
\newcommand{\floor}[1]{{\left\lfloor #1 \right\rfloor}}
%\let\ijtmp\ij
\renewcommand{\ij}{{ij}}
\newcommand{\inprod}[1][\cdot{,}\cdot]{{\left\langle #1 \right\rangle}}
\newcommand{\ith}{\textit{i}\textsuperscript{\;\!th} }
\newcommand{\indep}{\perp\!\!\!\perp}
\newcommand{\inv}[1][1]{^{-#1}}
\newcommand{\ito}[1][1]{_{i=#1}}
\newcommand{\jth}{\textit{j}\textsuperscript{th} }
\newcommand{\jto}[1][1]{_{j=#1}}
\newcommand{\kto}[1][1]{_{k=#1}}
%% Multi-line entries within a table
%% Call with \lnret[c]{stuff\\things}
\newcommand{\lnret}[2][l]{\begin{tabular}[#1]{@{}#1@{}}#2\end{tabular}}
\newcommand{\Lap}{\mathscr{L}}
\renewcommand{\liminf}[1][]{\varliminf\limits_{#1}}
\renewcommand{\limsup}[1][]{\varlimsup\limits_{#1}}
\newcommand{\matlab}{\textsc{Matlab}}
\newcommand{\midp}[1][]{\middle)^{#1}\middle(}
\newcommand{\mtm}{{m\times m}}
\newcommand{\mtn}{{m\times n}}
\newcommand{\myStrut}[1][0.9]{\rule{0pt}{#1\baselineskip}}
\newcommand{\nindep}{\not\!\indep}
\newcommand{\ninfty}{{-\infty}}
\newcommand{\norm}[1][\,\cdot\,]{{\left\Vert#1\right\Vert}}
%% n-1 and n+2 to be used in sub/superscripts w/ or w/o args
\newcommand{\nmo}{\bgroup\tmpnmo}
\newcommand{\tmpnmo}[1][]{\ifthenelse{\isempty{#1}}{n-1}{n-#1}\egroup}
\newcommand{\npo}{\bgroup\tmpnpo}
\newcommand{\tmpnpo}[1][]{\ifthenelse{\isempty{#1}}{n+1}{n+#1}\egroup}
\newcommand{\ntn}{{n\times n}}
\newcommand{\nto}[1][1]{_{n=#1}}
\newcommand{\OO}[1]{\mathcal{O}_{#1}}
\newcommand{\parens}[1]{{\left(#1\right)}}
\newcommand{\rref}{\xrightarrow{rref}}
\newcommand{\sbrkt}[1]{{\left[#1\vspace*{-1pt}\right]}}
\newcommand{\set}[1]{{\left\{#1\right\}}}
\newcommand{\Sum}{\displaystyle\sum}
\newcommand{\st}{\text{ such that }}
\newcommand{\tcol}[2][red]{\textcolor{#1}{#2}}
\newcommand{\To}{\longrightarrow}
\newcommand{\wti}{\widetilde}
\newcommand{\wha}{\widehat}
\newcommand{\xto}[1][1]{_{x=#1}}
\newcommand{\yto}[1][1]{_{y=#1}}

% ----------------------------------------------------------------

%% Custom title for solution box in exam package
\makeatletter
\@ifclassloaded{exam}{\renewcommand{\solutiontitle}{\noindent\textbf{Answer:}\par\noindent\setcounter{case}{0}}}{}
\makeatother
\endinput
